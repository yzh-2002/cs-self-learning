## UDP
> UDP(User Datagram Protocol)

前面说过，UDP尽在网络层IP协议的基础上增加了复用和解复用的能力，故UDP也是尽力而为的服务（即报文可能丢失，可能乱序）。

UDP常被用于流媒体等对丢包不敏感，但是对速率敏感的应用。如果想要增加可靠性，只能在应用层协议上进行改造。

### UDP报文结构

```p4
header udp_t {
    bit<16> src_port;
    bit<16> dst_port;
    bit<16> len;
    bit<16> checksum;
    // 应用层报文
}
```

校验和`checksum`提一下：

发送方：将整个UDP报文段（此时校验和对应bit均置为0）的内容分成多个16bit，然后求和，最高位进1的进行回卷运算，将计算结果`取反`放到校验和字段处。

接收方：计算收到报文段的校验和，如果不出错，则应该为16个0（也有可能出错，概率较低）,否则出错。