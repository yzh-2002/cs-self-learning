## 网络应用体系结构

1. 客户-服务器模式
2. 对等模式（`P2P Peer to Peer`）
3. 混合模式

### CS模式

1. 服务器一直运行，固定的IP和周知的端口号（约定）
2. 客户端主动连接，具有动态的IP，不能与其他客户端通信

### P2P模式

1. 任意端系统之间可以通信，每一个端系统既是客户端又是服务端
2. 参与的主机间歇性连接，且可以改变IP

### 混合模式

1. Napster
    1. 文件搜索：主机向中心服务器注册资源并检索
    2. 文件传输：任意主机之间
2. 即时通信
    1. 在线检测：用户上线时，向中心服务器注册IP，与用户聊天时向中心服务器搜寻好友IP
    2. 用户聊天

## 网络应用通信原理
> 网络应用之间的通信本质上是两个主机之间的进程通信

根据网络协议分层原理可知：网络应用之间的通信需要依赖于下一层传输层提供的服务（被抽象为`Socket API`），传输层提供的服务要求上层应用指明以下信息：

1. 传输报文（应用层报文，传输层会对其进行封装得到传输层报文）
2. 传输源和目的标识（`IP+Port`）

对于每次Socket通信而言，携带传输源和目的标识有些繁琐且容易出错，故`Socket API`提供了一个代号(`Socket`)标识`IP+Port`（就像Linux文件操作中的fd）。

对于基于TCP服务的应用通信，由于需要实现建立连接，因此采用(`SRC IP, SRC Port, DST IP, DST Port`)这个四元组对应一个`Socket`，发送报文时只需要携带该`Socket`+应用层报文即可

对于基于UDP服务的应用通信，由于无需建立连接，因此只需要对本地`(IP, Port)`对应一个`Sokcet`即可，但是发送报文时需要携带`(DST IP, DST Port)`

上面讲述了应用层如何使用传输层提供的服务进行数据通信，而应用层协议是定义了不同主机上应用如何解析报文，以及拿到解析后报文信息应该做什么动作。


